(()=>{"use strict";var e={d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{Z:()=>B});const t=class{constructor(e,t){this._link=e.link,this._name=e.name,this._cardSelector=t}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}createCard(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".element__img").src=this._link,this._element.querySelector(".element__img").alt=this._name,this._element.querySelector(".element__title").textContent=this._name,this._element}_setEventListeners(){this._element.querySelector(".element__like").addEventListener("click",(e=>{this._toggleLike(e)})),this._element.querySelector(".element__delete").addEventListener("click",(()=>{this._removeElement()})),this._element.querySelector(".element__img").addEventListener("click",(()=>{B(this._link,this._name)}))}_removeElement(){this._element.remove(),this._element=null}_toggleLike(e){e.target.classList.toggle("element__like_is-active")}},r=class{constructor(e,t){this._formSelector=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inputErrorClass=e.inputErrorClass,this._inputErrorActive=e.inputErrorActive,this._formElement=document.querySelector(this._formSelector),this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}enableValidation(){this._setEventListeners()}_setEventListeners(){this._inputList.forEach((e=>{this._hideInputError(e),e.addEventListener("keyup",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))})),this._toggleButtonState()}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_toggleButtonState(){this._buttonElement.disabled=this._hasInvalidInput()}_hasInvalidInput(){return Array.from(this._inputList).some((e=>!e.validity.valid))}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);t.classList.remove(this._inputErrorClass),t.textContent="",e.classList.remove(this._inputErrorActive)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._inputErrorActive)}_resetValidation(){this._inputList.forEach((e=>this._hideInputError(e))),this._toggleButtonState()}},o={formSelector:".popup__form",inputSelector:".popup__field",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:".popup__field_type_error",inputErrorActive:"popup__field-error_visible"},n=document.querySelector(".profile__name"),i=document.querySelector(".profile__profession"),l=document.querySelector(".profile__edit-button"),s=document.querySelector(".popup__form_type_name"),_=document.querySelector(".popup_type_edit"),p=_.querySelector(".popup__close-button"),u=_.querySelector(".popup__field_type_name"),c=_.querySelector(".popup__field_type_profession"),a=document.querySelector(".popup_type_place"),d=document.querySelector(".profile__add-button"),m=a.querySelector(".popup__close-button"),h=a.querySelector(".popup__form_type_place"),y=h.querySelector(".popup__field_type_place"),v=h.querySelector(".popup__field_type_link"),S=document.querySelector(".elements"),E=Array.from(document.querySelectorAll(".popup")),f=document.querySelector(".popup_type_image"),q=f.querySelector(".popup__img"),L=f.querySelector(".popup__label"),b=f.querySelector(".popup__close-button"),g=new r(o,".popup__form_type_name"),k=new r(o,".popup__form_type_place");function C(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keyup",A)}function I(e){e.classList.add("popup_is-opened"),document.addEventListener("keyup",A)}g.enableValidation(),k.enableValidation();const A=function(e){"Escape"===e.key&&C(document.querySelector(".popup_is-opened"))};function B(e,t){I(f),q.src=e,q.alt=t,L.textContent=t}l.addEventListener("click",(()=>{I(_),u.value=n.textContent,c.value=i.textContent,g._resetValidation()})),p.addEventListener("click",(()=>{C(_)})),s.addEventListener("submit",(e=>{e.preventDefault(),n.textContent=u.value,i.textContent=c.value,C(_),s.reset()})),d.addEventListener("click",(()=>{I(a),h.reset(),k._resetValidation()})),m.addEventListener("click",(()=>{C(a),h.reset()})),h.addEventListener("submit",(function(e){e.preventDefault();const r=new t({link:v.value,name:y.value},"#place-template").createCard();S.prepend(r),h.reset(),C(a)})),b.addEventListener("click",(()=>{C(f)})),E.forEach((e=>{e.addEventListener("click",(t=>{t.target===e&&C(e)}))})),initialCards.forEach((e=>{const r=new t(e,"#place-template").createCard();S.append(r)}))})();